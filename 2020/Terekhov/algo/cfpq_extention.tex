\begin{algorithm}
\begin{algorithmic}[1]
\Function{CfpqTraverseNew}{String[] patterns, PathPatternCtx pathCtx}
\While{$\exists$ p $\in$ patterns: !pathCtx[p].isEvaluated}
    \ForAll{p $\in$ patterns}
        \If{!pathCtx[p].isEvaluated}
            \State new\_matrix = \Call{EvalueteAlgExpr}{pathCtx[p].expr}
            \If{new\_matrix == pathCtx[p].matrix}
                \State pathCtx[p].isEvaluated = true
            \Else
                \State pathCtx[p].matrix = new\_matrix
            \EndIf
        \EndIf
    \EndFor
\EndWhile
\EndFunction
\end{algorithmic}
\label{algo:matrix-extention}
\caption{Расширенный матричный алгоритм.}
\end{algorithm}
